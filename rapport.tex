\documentclass[a4paper,10pt]{article}

\usepackage[french]{babel}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{url}


\title{MINI-PROJET AVEC L'ARCHITECTURE Y86}
\author{Nathan VANBESELAERE, Sacha DUPERRET}

\begin{document}

\maketitle

\begin{abstract}
Rapport détaillant le travail effectué en binôme pour adapter l'architecture Y86 aux consignes.
\end{abstract}

\tableofcontents

\section{Exercice 1}
\subsection{Question 1}

Nous supprimons l'instruction :
\begin{verbatim}
    intsig MRMOVL                   'instructionSet.get("mrmovl").icode'
\end{verbatim}
Nous modifions également l'instruction set pour que RMMOVL ait un icode = 4 et ifun = 0, et MRMOVL un icode = 4 avec un ifun = 1.
Le code source Y86 compile bien, le code hexadécimal est bien de 40 et 41 pour RMMOVL (ifun = 0) et RMMOVL (ifun = 1) respectivement.

\subsection{Question 2}
Nous supprimons l'ensemble des occurences de MRMOVL.
Dans les cas où MRMOVL était dissocié de RMMOVL, nous ajoutons l'instruction :
\begin{verbatim}
    || icode == RMMOVL && ifun == 1
\end{verbatim}
permettant ainsi d'exécuter correctement les instructions demandées.

\section{Exercice 2}
\subsection{Question 1}
Nous modifions le instruction set en ajoutant STRGL avec un icode = 14 et un ifun = 0.
Nous testons cette nouvelle instruction en utilisant le code joint au projet (Ex1-Q1).
\subsection{Question 2}
Nous ajoutons l'instruction
\begin{verbatim}
    intsig STRGL                     'instructionSet.get("strgl").icode'
\end{verbatim}
permettant de donner un icode à l'instruction STRGL.
Nous testons le code avec les même instructions que précédemment. Les valeurs des signaux et les opérations réalisées sont conformes à nos attentes.

\subsection{Question 3}
Nous ajoutons l'instruction
\begin{verbatim}
    intsig STOSL                     'instructionSet.get("strgl").icode'
\end{verbatim}
permettant de donner un icode à l'instruction STOSL. Suivant la même technique que pour la question 2 de l'execrcice 1, nous factorisons les cas commun à STRGL ifun == 0 || infun == 1.

\subsection{Question 4}
Nous codons un clone de strcpy en y86. Nous la testons dans le simulateur, avec le code joint à ce rapport.

\section{Exercice 3}
\subsection{Question 1}
Nous ajoutons un icode de 15 avec ifun de 4 pour le code LOOP. Le code compile avec cette nouvelle instruction.

\subsection{Question 2}
Nous déclarons les signaux LOOP et RECX. Sous la forme :
\begin{verbatim}
    intsig LOOP                     'instructionSet.get("loop").icode'
    intsig RECX                     'registers.ecx'
\end{verbatim}


Dans new\_pc nous modifions la \#Taken branch: Use immediate value.

\begin{verbatim}
    icode in { JXX, LOOP } && Bch : valC;
\end{verbatim}

Nous testons nos modifications avec ce code :

\begin{verbatim}
    .pos 0
irmovl t, %esi
irmovl r, %edi
mrmovl s, %ecx

boucle: lodsl %eax
        stosl %eax
        loop boucle
        halt

.pos 0x100
s:  .long 5
t:  .long 2
    .long 3
    .long 5
    .long 7
    .long 11
r:

\end{verbatim}
Le code compile et s'exécute sans erreur.

\section{Exercice 4}
\subsection{Question 1}
Nous ....

\subsection{Question 2}

\subsection{Question 3}

\end{document}

